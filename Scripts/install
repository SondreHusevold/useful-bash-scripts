## THIS SCRIPT ASSUMES YOU'VE COPIED YOUR OLD PROFILE
## AND LOADED IT ALREADY ON THE NEW SYSTEM
## ORIGINALLY FROM https://github.com/ryanmaclean/OSX-Post-Install-Script ALL CREDITS TO RYAN.


## Allow press and hold keys
sudo defaults write NSGlobalDomain ApplePressAndHoldEnabled -bool false

## SET HOSTNAME IN ALL THE RIGHT PLACES
sudo scutil --set ComputerName "Sondre's MacBook Air"
sudo scutil --set HostName "sondre"
sudo scutil --set LocalHostName "sondre"
sudo defaults write /Library/Preferences/SystemConfiguration/com.apple.smb.server NetBIOSName -string "sondre"

## TURN OFF SCREENSAVER PASSWORD DELAY
#defaults write com.apple.screensaver askForPassword -int 1
#defaults write com.apple.screensaver askForPasswordDelay -int 0

## AUTOMATICALLY QUIT PRINTER APP ONCE THE PRINT JOBS COMPLETE
defaults write com.apple.print.PrintingPrefs “Quit When Finished” -bool true

## DISABLE THE “ARE YOU SURE YOU WANT TO OPEN THIS APPLICATION?” DIALOG
defaults write com.apple.LaunchServices LSQuarantine -bool false

## SHOW PERCENTAGE IN BATTERY STATUS
defaults write com.apple.menuextra.battery ShowPercent -string "YES"
defaults write com.apple.menuextra.battery ShowTime -string "NO"

## ENABLE TAB IN MODAL DIALOGS
defaults write NSGlobalDomain AppleKeyboardUIMode -int 3

##FINDER: ALLOW TEXT SELECTION IN QUICK LOOK
defaults write com.apple.finder QLEnableTextSelection -bool true

##DISPLAY FULL POSIX PATH AS FINDER WINDOW TITLE
defaults write com.apple.finder _FXShowPosixPathInTitle -bool true

##DISABLE THE WARNING WHEN CHANGING A FILE EXTENSION
defaults write com.apple.finder FXEnableExtensionChangeWarning -bool false
##AVOID CREATING .DS_STORE FILES ON NETWORK VOLUMES
defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true

##AUTOMATICALLY OPEN A NEW FINDER WINDOW WHEN A VOLUME IS MOUNTED
 defaults write com.apple.frameworks.diskimages auto-open-ro-root -bool true
 defaults write com.apple.frameworks.diskimages auto-open-rw-root -bool true
 defaults write com.apple.finder OpenWindowForNewRemovableDisk -bool true

# EMPTY TRASH SECURELY BY DEFAULT
 defaults write com.apple.finder EmptyTrashSecurely -bool true
# ENABLE AIRDROP OVER ETHERNET AND ON UNSUPPORTED MACS
 defaults write com.apple.NetworkBrowser BrowseAllInterfaces -bool true

# MAKE DOCK ICONS OF HIDDEN APPLICATIONS TRANSLUCENT
 defaults write com.apple.dock showhidden -bool true

## SHOW ICONS FOR HARD DRIVES, SERVERS, AND REMOVABLE MEDIA ON THE DESKTOP
defaults write com.apple.finder ShowExternalHardDrivesOnDesktop -bool false
defaults write com.apple.finder ShowHardDrivesOnDesktop -bool false
defaults write com.apple.finder ShowMountedServersOnDesktop -bool false
defaults write com.apple.finder ShowRemovableMediaOnDesktop -bool false

## REMOVE UN-NEEDED LINKS IN SAFARI
defaults write com.apple.Safari ProxiesInBookmarksBar "()"

##DISABLE SAFARI’S THUMBNAIL CACHE FOR HISTORY AND TOP SITES
defaults write com.apple.Safari DebugSnapshotsUpdatePolicy -int 2

## SET TERMINAL TO HOMEBREW THEME, OPTIONS ARE "Pro", "Homebrew", "Man Page", "Novel", "Ocean", "Red Sands", "Silver Aerogel", "Solid Colors"
defaults write com.apple.terminal StringEncodings -array 4
defaults write com.apple.Terminal "Default Window Settings" -string "Pro"
defaults write com.apple.Terminal "Default Window Settings" -string "Pro"
defaults write com.apple.Terminal "Startup Window Settings" -string "Pro"

## TURN OFF SMART-QUOTES AS IT INTERFERES WITH CODE SNIPPETS
defaults write com.apple.messageshelper.MessageController SOInputLineSettings -dict-add "automaticQuoteSubstitutionEnabled" -bool false

## TURN OFF SUDDEN MOTION SENSOR FOR SSD, SET STAND-BY DELAY TO 1 DAY
## COMMENTED OUT, UNCOMMENT TO TAKE EFFECT
#sudo pmset -a sms 0
#sudo pmset -a standbydelay 86400

## SORT ACTIVITY MONITOR RESULTS BY CPU USAGE
defaults write com.apple.ActivityMonitor SortColumn -string "CPUUsage"
defaults write com.apple.ActivityMonitor SortDirection -int 0

## EXPAND SAVE PANEL BY DEFAULT
defaults write NSGlobalDomain NSNavPanelExpandedStateForSaveMode -bool true

## TURN OFF ITUNES DEVICE BACKUP - USE ICLOUD BACKUPS INSTEAD
defaults write com.apple.iTunes AutomaticDeviceBackupsDisabled -bool true

## UNHIDE YOUR USER LIBRARY
chflags nohidden ~/Library

## SET REASONABLE SCREEN CAPTURE DEFAULTS
defaults write com.apple.screencapture location -string "$HOME/Desktop"
defaults write com.apple.screencapture type -string "png"

## SET FINDER TO DEFAULT TO $HOME
defaults write com.apple.finder NewWindowTarget -string "PfLo"
defaults write com.apple.finder NewWindowTargetPath -string "file://${HOME}/"

## TURN OFF FAST USER SWITCHING
sudo defaults write /Library/Preferences/.GlobalPreferences MultipleSessionEnabled -bool false

# Disable the Genius sidebar in iTunes
 defaults write com.apple.iTunes disableGeniusSidebar -bool true

# Mail
# COPY EMAIL ADDRESSES AS FOO@EXAMPLE.COM INSTEAD OF FOO BAR <FOO@EXAMPLE.COM> IN MAIL.APP
defaults write com.apple.mail AddressesIncludeNameOnPasteboard -bool false

# Terminal
# Enable “focus follows mouse” for Terminal.app and all X11 apps i.e. hover over a window and start typing in it without clicking first
 defaults write com.apple.terminal FocusFollowsMouse -bool true
 defaults write org.x.X11 wm_ffm -bool true

# Time Machine
# Prevent Time Machine from prompting to use new hard drives as backup volume
 defaults write com.apple.TimeMachine DoNotOfferNewDisksForBackup -bool true

## Remove items from dock that you won't use
##
dloc=$(defaults read com.apple.dock persistent-apps | grep _CFURLString\" | awk '/Mail/ {print NR}') && /usr/libexec/PlistBuddy -c "Delete persistent-apps:$dloc" ~/Library/Preferences/com.apple.dock.plist && killall Dock
dloc=$(defaults read com.apple.dock persistent-apps | grep _CFURLString\" | awk '/Contacts/ {print NR}') && /usr/libexec/PlistBuddy -c "Delete persistent-apps:$dloc" ~/Library/Preferences/com.apple.dock.plist && killall Dock
dloc=$(defaults read com.apple.dock persistent-apps | grep _CFURLString\" | awk '/Calendar/ {print NR}') && /usr/libexec/PlistBuddy -c "Delete persistent-apps:$dloc" ~/Library/Preferences/com.apple.dock.plist && killall Dock
dloc=$(defaults read com.apple.dock persistent-apps | grep _CFURLString\" | awk '/Reminders/ {print NR}') && /usr/libexec/PlistBuddy -c "Delete persistent-apps:$dloc" ~/Library/Preferences/com.apple.dock.plist && killall Dock
dloc=$(defaults read com.apple.dock persistent-apps | grep _CFURLString\" | awk '/Maps/ {print NR}') && /usr/libexec/PlistBuddy -c "Delete persistent-apps:$dloc" ~/Library/Preferences/com.apple.dock.plist && killall Dock
dloc=$(defaults read com.apple.dock persistent-apps | grep _CFURLString\" | awk '/Facetime/ {print NR}') && /usr/libexec/PlistBuddy -c "Delete persistent-apps:$dloc" ~/Library/Preferences/com.apple.dock.plist && killall Dock
dloc=$(defaults read com.apple.dock persistent-apps | grep _CFURLString\" | awk '/iBooks/ {print NR}') && /usr/libexec/PlistBuddy -c "Delete persistent-apps:$dloc" ~/Library/Preferences/com.apple.dock.plist && killall Dock
dloc=$(defaults read com.apple.dock persistent-apps | grep _CFURLString\" | awk '/Notes/ {print NR}') && /usr/libexec/PlistBuddy -c "Delete persistent-apps:$dloc" ~/Library/Preferences/com.apple.dock.plist && killall Dock


## USE PLAIN TEXT MODE FOR NEW TEXTEDIT DOCUMENTS
defaults write com.apple.TextEdit RichText -int 0

# Open and save files as UTF–8 in TextEdit
defaults write com.apple.TextEdit PlainTextEncoding -int 4
defaults write com.apple.TextEdit PlainTextEncodingForWrite -int 4
## Enable the debug menu in Disk Utility
defaults write com.apple.DiskUtility DUDebugMenuEnabled -bool true
defaults write com.apple.DiskUtility advanced-image-options -bool true

## INSTALL HOMEBREW AND COMMANDLINE TOOLS MISSING IN OSX, ALONG WITH SOME PRETTINESS
xcode-select --install
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
brew install wget cmake watch gnu-sed coreutils psutils tmux tmux-mem-cpu-load git tree

## INSTALL OH MY ZSH AND SET ZSH AS DEFAULT SHELL
sudo curl -L http://install.ohmyz.sh | sh
chsh -s /bin/zsh

## INSTALL CASKROOM AND ALL APPLICATIONS
brew install caskroom/cask/brew-cask

## BROWSER PLUGINS
brew cask install silverlight flash-player java

## CODING TOOLS
brew cask install sourcetree eclipse-java kdiff3

## PICK AN EDITOR
brew cask install sublime-text
#defaults write com.apple.LaunchServices LSHandlers -array-add "{LSHandlerContentType=public.plain-text;LSHandlerRoleAll=com.sublimetext.2;}"
## SUBLIME 3 VERSION
defaults write com.apple.LaunchServices LSHandlers -array-add '{LSHandlerContentType=public.plain-text;LSHandlerRoleAll=com.sublimetext.3;}'

## GET A YOSEMITE ICON FOR SUBLIME
wget -O /Applications/Sublime\ Text.app/Contents/Resources/Sublime\ Text.icns https://dribbble.com/shots/1678555-Sublime-Text-3-Replacement-Icon/attachments/265398

## INSTALL SUBLIME PACKAGE MANAGEMENT
wget https://sublime.wbond.net/Package%20Control.sublime-package
#mv Package\ Control.sublime-package ~/Library/Application\ Support/Sublime\ Text\ 2/Installed\ Packages/
## SUBLIME 3 VERSION
mv Package\ Control.sublime-package ~/Library/Application\ Support/Sublime\ Text\ 3/Installed\ Packages/
## GET YOUR HIPSTER ON!
git clone https://github.com/phyllisstein/HipsterIpsum.git ~/Library/Application\ Support/Sublime\ Text\ 3/Installed\ Packages/Hipster\ Ipsum


## PICK A MOCKUP APP
#brew cask install balsamiq
brew cask install pencil

## SYSTEM UTILITIES 
brew cask install the-unarchiver onyx android-file-transfer img2icns

## VoIP
brew cask install skype mumble

## FTP
brew cask install filezilla

## Calibre
brew cask install calibre

## FINDER REPLACEMENT
brew cask install xtrafinder

## CLOUD
brew cask install dropbox

## MAIL CLIENT
brew cask thunderbird

## BIT TORRENT
brew cask transmission

## AUDIO
brew install mpd ncmpcpp
brew cask install audacity

# SPOTIFY
brew cask install spotify spotify-notifications

# FFMPEG
brew install ffmpeg --with-fdk-aac --with-ffplay --with-fontconfig --with-freetype --with-frei0r --with-libass --with-libbluray --with-libcaca --with-libquvi --with-libsoxr --with-libvidstab --with-libvo-aacenc --with-libvorbis --with-libvpx --with-opencore-amr --with-openjpeg --with-openssl --with-opus --with-rtmpdump --with-schroedinger --with-speex --with-theora --with-tools --with-x265 

# mpv
export LC_ALL=en_US.UTF-8 ; export LANG=en_US.UTF-8
brew tap mpv-player/mpv
brew install --HEAD mpv-player/mpv/libass-ct
brew install --HEAD --with-bundle --with-bluray-support --with-libdvdread --with-libquvi --with-little-cms2 --with-lua mpv
brew linkapps mpv 

## GRAPHICS APPS
brew cask install wacom-bamboo-tablet

## INSTALL FIREFOX
brew cask install firefox

## INSTANT MESSAGING
brew cask install adium
brew install irssi

## INSTALL pip
wget https://bootstrap.pypa.io/get-pip.py
sudo python get-pip.py

## WARN USER
sleep 30
echo About to close many apps - shutdown the following, or have them cycled for you: 
echo Address Book, Calendar, Contacts, Dashboard, Dock, Finder, Mail, Safari, SystemUIServer, Terminal, iCal, iTunes
## CLOSE ALL APPS THAT NEED TO BE REFRESHED FOR SETTINGS TO TAKE
for app in "Address Book" "Calendar" "Contacts" "Dashboard" "Dock" "Finder" "Mail" "Safari" "SystemUIServer" "Terminal" "iCal" "iTunes"; do killall "$app" > /dev/null 2>&1 done

## RUN A MACOS UPDATE
sudo softwareupdate --install -all

clear

echo "Now install: Photoshop, VMWare Fusion and Paragon NTFS manually."